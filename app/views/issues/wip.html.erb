<div class="content-full">
  <h1>WIP</h1>
  
  <script>
  $(function () {
      $('#container').highcharts({
          chart: {
              type: 'spline'
          },
          title: {
              text: 'Epic Cycle Time'
          },
          subtitle: {
              text: 'Historical Cycle Time and WIP values'
          },
          xAxis: {
              type: 'datetime',
              dateTimeLabelFormats: { // don't display the dummy year
                  month: '%e. %b',
                  year: '%b'
              },
              title: {
                  text: 'Date'
              }
          },
          yAxis: [{
            title: {
                text: 'Cycle Time'
            },
            min: 0
          }, {
              title: {
                  text: 'WIP'
              },
              opposite: true,
              min: 0
          }],
          tooltip: {
              headerFormat: '<b>{series.name}</b><br>',
              pointFormat: '{point.x:%e. %b}: {point.y:.2f} m'
          },

          plotOptions: {
              spline: {
                  marker: {
                      enabled: true
                  }
              }
          },

          series: [{
              name: 'Cycle Time',
              yAxis: 0,
              color: '#F66',
              data: [
                  [Date.UTC(1970,  9, 18), 5   ],
                  [Date.UTC(1970,  9, 26), 6.2 ],
                  [Date.UTC(1970, 11,  1), 7.47],
                  [Date.UTC(1970, 11, 11), 5.55],
                  [Date.UTC(1970, 11, 25), 7.38],
                  [Date.UTC(1971,  0,  8), 1.38],
                  [Date.UTC(1971,  0, 15), 6.38],
                  [Date.UTC(1971,  1,  1), 1.38],
                  [Date.UTC(1971,  1,  8), 1.48],
                  [Date.UTC(1971,  1, 21), 5.5 ],
                  [Date.UTC(1971,  2, 12), 6.89],
                  [Date.UTC(1971,  2, 25), 2.0 ],
                  [Date.UTC(1971,  3,  4), 8.94],
                  [Date.UTC(1971,  3,  9), 1.91],
                  [Date.UTC(1971,  3, 13), 1.75],
                  [Date.UTC(1971,  3, 19), 1.6 ],
                  [Date.UTC(1971,  4, 25), 3.6 ],
                  [Date.UTC(1971,  4, 31), 5.35],
                  [Date.UTC(1971,  5,  7), 0   ]
              ]
          }, {
              name: 'WIP',
              yAxis: 1,
              color: '#66F',
              // Define the data points. All series have a dummy year
              // of 1970/71 in order to be compared on the same x axis. Note
              // that in JavaScript, months start at 0 for January, 1 for February etc.
              data: [
                  [Date.UTC(1970,  9, 27), 0   ],
                  [Date.UTC(1970, 10, 10), 0.6 ],
                  [Date.UTC(1970, 10, 18), 0.7 ],
                  [Date.UTC(1970, 11,  2), 0.8 ],
                  [Date.UTC(1970, 11,  9), 0.6 ],
                  [Date.UTC(1970, 11, 16), 0.6 ],
                  [Date.UTC(1970, 11, 28), 0.67],
                  [Date.UTC(1971,  0,  1), 0.81],
                  [Date.UTC(1971,  0,  8), 0.78],
                  [Date.UTC(1971,  0, 12), 0.98],
                  [Date.UTC(1971,  0, 27), 1.84],
                  [Date.UTC(1971,  1, 10), 1.80],
                  [Date.UTC(1971,  1, 18), 1.80],
                  [Date.UTC(1971,  1, 24), 1.92],
                  [Date.UTC(1971,  2,  4), 2.49],
                  [Date.UTC(1971,  2, 11), 2.79],
                  [Date.UTC(1971,  2, 15), 2.73],
                  [Date.UTC(1971,  2, 25), 2.61],
                  [Date.UTC(1971,  3,  2), 2.76],
                  [Date.UTC(1971,  3,  6), 2.82],
                  [Date.UTC(1971,  3, 13), 2.8 ],
                  [Date.UTC(1971,  4,  3), 2.1 ],
                  [Date.UTC(1971,  4, 26), 1.1 ],
                  [Date.UTC(1971,  5,  9), 0.25],
                  [Date.UTC(1971,  5, 12), 0   ]
              ]
          }]
      });
  });
  </script>
  
  <div id="container" style="width:100%; height:400px;"></div>
  
  <table>
    <% @wip_histories.each do |history| %>
      <tr>
        <td><%= history.date %></td>
        <td><%= history.wip %></td>
      </tr>
    <% end %>
  </table>
</div>
